<!DOCTYPE html>
<html lang="en">
<head>
  <!-- 
    ###################################################################################################
    CPA ON FIRE - ENTITY SELECTION CALCULATOR
    (Sole Prop, Partnership, S Corp, C Corp)
    With a user-chosen personal tax rate (0â€“35%) for pass-through or salary,
    and a fixed 15% dividend tax on leftover C Corp distributions (after 21% corporate tax).
    ###################################################################################################
  -->
  <meta charset="UTF-8">
  <title>CPA On Fire - Entity Selection Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Optional: Google Fonts -->
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap"
  />

  <!-- MASSIVE inline CSS for demonstration -->
  <style>
    /*********************************************************************************
      1) GLOBAL & RESET
    *********************************************************************************/
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html, body {
      width: 100%;
      height: 100%;
      font-family: 'Open Sans', sans-serif;
      background-color: #fdfdfd;
      color: #333;
      line-height: 1.6;
    }
    a {
      text-decoration: none;
      color: inherit;
    }
    :root {
      --brand-orange: #E55328; /* "CPA On Fire" orange */
      --brand-white: #fff;
      --brand-bg: #fdfdfd;
      --max-width: 1200px;
    }

    .container {
      width: 100%;
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 0 1rem;
    }

    /*********************************************************************************
      2) NAVBAR
    *********************************************************************************/
    .navbar {
      background-color: var(--brand-orange);
      padding: 1rem 0;
    }
    .navbar-container {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .navbar-logo {
      font-weight: 700;
      font-size: 1.5rem;
      color: var(--brand-white);
    }
    .navbar-menu {
      display: flex;
      gap: 1rem;
    }
    .navbar-menu li a {
      color: var(--brand-white);
      font-weight: 600;
    }

    /*********************************************************************************
      3) CALCULATOR SECTION
    *********************************************************************************/
    .calculator-section {
      background-color: #fff;
      padding: 3rem 1rem;
      border-bottom: 1px solid #eee;
    }
    .calc-container {
      max-width: 900px;
      margin: 0 auto;
      background-color: #fff;
      border-radius: 6px;
      box-shadow: 0 1px 5px rgba(0,0,0,0.1);
      padding: 2rem;
    }
    .calc-header {
      text-align: center;
      margin-bottom: 2rem;
    }
    .calc-header h1 {
      color: var(--brand-orange);
      font-weight: 700;
      font-size: 2rem;
      margin-bottom: 1rem;
    }
    .calc-header p {
      color: #555;
      max-width: 700px;
      margin: 0 auto;
      margin-bottom: 1rem;
    }
    .calc-step {
      margin-bottom: 2rem;
    }
    .calc-step h2 {
      font-size: 1.2rem;
      color: var(--brand-orange);
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    .calc-step p {
      margin-bottom: 1rem;
      color: #777;
      font-size: 0.95rem;
    }
    .slider-group, .form-group {
      margin-bottom: 1.25rem;
    }
    .slider-label {
      font-weight: 700;
      color: #333;
      display: block;
      margin-bottom: 0.25rem;
    }
    .slider-value {
      margin-left: 0.5rem;
      font-weight: 700;
      color: var(--brand-orange);
    }
    input[type="range"] {
      width: 100%;
      margin-top: 0.5rem;
    }
    select {
      width: 100%;
      padding: 0.5rem;
      border-radius: 4px;
      border: 1px solid #ccc;
    }
    .calc-btn-wrap {
      text-align: center;
      margin-top: 2rem;
    }
    .calc-btn {
      background-color: var(--brand-orange);
      color: #fff;
      padding: 0.75rem 1.5rem;
      font-weight: 600;
      border-radius: 4px;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .calc-btn:hover {
      background-color: #c4431e;
    }

    /*********************************************************************************
      4) RESULTS SECTION
        We'll show 4 columns: sole prop, partnership, s corp, c corp
    *********************************************************************************/
    .results-section {
      margin-top: 3rem;
      display: none; /* hidden until user calculates */
      background-color: #fff;
      border-radius: 6px;
      box-shadow: 0 1px 5px rgba(0,0,0,0.1);
      padding: 2rem;
    }
    .results-header {
      text-align: center;
      margin-bottom: 2rem;
    }
    .results-header h2 {
      color: var(--brand-orange);
      font-size: 1.4rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }
    .results-header p {
      color: #555;
      max-width: 600px;
      margin: 0 auto;
      margin-top: 0.5rem;
      margin-bottom: 1.5rem;
    }

    .results-grid {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr 1fr; /* 4 columns for each entity type */
      gap: 1rem;
      margin-bottom: 2rem;
    }
    .results-card {
      background-color: #fafafa;
      padding: 1.5rem;
      border-radius: 6px;
      border: 1px solid #eee;
    }
    .results-card h3 {
      color: var(--brand-orange);
      font-weight: 600;
      font-size: 1.2rem;
      margin-bottom: 1rem;
    }
    .results-line {
      margin-bottom: 0.5rem;
      color: #444;
    }
    .results-bold {
      font-weight: 700;
      color: #333;
    }

    /* Chart Section */
    .chart-section {
      text-align: center;
      margin-bottom: 2rem;
    }
    #chartCanvas {
      width: 100%;
      max-width: 600px;
      height: 300px;
      background-color: #fafafa;
      margin: 0 auto;
      border: 1px solid #eee;
      border-radius: 4px;
    }

    /*********************************************************************************
      5) INFO SECTION
    *********************************************************************************/
    .info-section {
      background-color: #fefefe;
      padding: 3rem 1rem;
    }
    .info-container {
      max-width: var(--max-width);
      margin: 0 auto;
    }
    .info-title {
      text-align: center;
      margin-bottom: 1.5rem;
    }
    .info-title h2 {
      color: var(--brand-orange);
      font-size: 1.5rem;
      font-weight: 700;
    }
    .info-content {
      color: #555;
      max-width: 800px;
      margin: 0 auto;
      line-height: 1.6;
    }

    /*********************************************************************************
      6) FOOTER
    *********************************************************************************/
    .footer {
      background-color: #222;
      color: #fff;
      text-align: center;
      padding: 1rem 0;
      margin-top: 3rem;
    }

    /*********************************************************************************
      7) RESPONSIVE BREAKPOINTS
    *********************************************************************************/
    @media (max-width: 900px) {
      .results-grid {
        grid-template-columns: 1fr 1fr; /* 2 columns on medium screens */
        row-gap: 2rem;
      }
    }
    @media (max-width: 600px) {
      .navbar-container {
        flex-direction: column;
      }
      .navbar-menu {
        margin-top: 1rem;
      }
      .results-grid {
        grid-template-columns: 1fr; /* 1 column on small screens */
      }
    }
  </style>
</head>
<body>
  <!-- ======================================================================================
       NAVBAR
  ====================================================================================== -->
  <header class="navbar">
    <div class="container navbar-container">
      <div class="navbar-logo">CPA On Fire</div>
      <ul class="navbar-menu">
        <li><a href="#calculatorSection">Calculator</a></li>
        <li><a href="#infoSection">Info</a></li>
      </ul>
    </div>
  </header>

  <!-- ======================================================================================
       CALCULATOR SECTION
  ====================================================================================== -->
  <section class="calculator-section" id="calculatorSection">
    <div class="calc-container">
      <div class="calc-header">
        <h1>Entity Selection Calculator</h1>
        <p>
          Compare four business entity types (Sole Prop, Partnership, S Corp, C Corp) 
          by factoring in self-employment or payroll taxes, your chosen personal tax rate, 
          and a 15% dividend tax on C Corp distributions. 
        </p>
      </div>

      <!-- Step 1: Net Income -->
      <div class="calc-step">
        <h2>1) Annual Net Business Income</h2>
        <p>
          For S & C Corps, this is your profit before paying a W-2 salary. 
          For Sole Prop & Partnership, it's simply your total earnings.
        </p>
        <div class="slider-group">
          <label class="slider-label" for="netIncomeRange">Net Income ($10k - $500k):</label>
          <input
            type="range"
            id="netIncomeRange"
            min="10000"
            max="500000"
            step="1000"
            value="100000"
            oninput="updateNetIncomeValue(this.value)"
          />
          <span class="slider-value" id="netIncomeValue">$100,000</span>
        </div>
      </div>

      <!-- Step 2: Owner Salary (for S & C Corps) -->
      <div class="calc-step">
        <h2>2) Owner Salary (S & C Corp Only)</h2>
        <p>
          The portion considered W-2 wages. Sole Prop & Partnership do not use this field.
        </p>
        <div class="slider-group">
          <label class="slider-label" for="ownerSalaryRange">Owner Salary ($20k - $200k):</label>
          <input
            type="range"
            id="ownerSalaryRange"
            min="20000"
            max="200000"
            step="1000"
            value="60000"
            oninput="updateOwnerSalaryValue(this.value)"
          />
          <span class="slider-value" id="ownerSalaryValue">$60,000</span>
        </div>
      </div>

      <!-- Step 3: Personal Tax Rate (for pass-through income or corp salary) -->
      <div class="calc-step">
        <h2>3) Personal Tax Rate (0% - 35%)</h2>
        <p>
          This applies to pass-through income (Sole Prop, Partnership, S Corp) 
          or the salary portion (C Corp). 
          Any leftover from C Corp is taxed at 21% plus a separate 15% dividend tax.
        </p>
        <div class="form-group">
          <label class="slider-label" for="personalTaxSelect">Select Your Effective Personal Rate:</label>
          <select id="personalTaxSelect">
            <option value="0">0%</option>
            <option value="0.05">5%</option>
            <option value="0.1">10%</option>
            <option value="0.15">15%</option>
            <option value="0.2">20%</option>
            <option value="0.25">25%</option>
            <option value="0.3">30%</option>
            <option value="0.35">35%</option>
          </select>
        </div>
      </div>

      <!-- Calculate Button -->
      <div class="calc-btn-wrap">
        <button class="calc-btn" onclick="calculateAllEntities()">Calculate Taxes</button>
      </div>

      <!-- RESULTS -->
      <div class="results-section" id="resultsSection">
        <div class="results-header">
          <h2>Your Results</h2>
          <p>Approximate total taxes for each entity, including payroll/self-employment tax, personal tax, corporate tax, and dividend tax.</p>
        </div>

        <div class="results-grid">
          <!-- Sole Prop Card -->
          <div class="results-card" id="spCard">
            <h3>Sole Prop</h3>
            <p class="results-line" id="sp-seTax"></p>
            <p class="results-line" id="sp-personalTax"></p>
            <p class="results-line results-bold" id="sp-total"></p>
          </div>

          <!-- Partnership Card -->
          <div class="results-card" id="ptCard">
            <h3>Partnership</h3>
            <p class="results-line" id="pt-seTax"></p>
            <p class="results-line" id="pt-personalTax"></p>
            <p class="results-line results-bold" id="pt-total"></p>
          </div>

          <!-- S Corp Card -->
          <div class="results-card" id="scCard">
            <h3>S Corp</h3>
            <p class="results-line" id="sc-payrollTax"></p>
            <p class="results-line" id="sc-personalTax"></p>
            <p class="results-line results-bold" id="sc-total"></p>
          </div>

          <!-- C Corp Card -->
          <div class="results-card" id="ccCard">
            <h3>C Corp</h3>
            <p class="results-line" id="cc-payrollTax"></p>
            <p class="results-line" id="cc-corpTax"></p>
            <p class="results-line" id="cc-dividendTax"></p>
            <p class="results-line" id="cc-personalTax"></p>
            <p class="results-line results-bold" id="cc-total"></p>
          </div>
        </div>

        <!-- Bar Chart -->
        <div class="chart-section">
          <canvas id="chartCanvas" width="600" height="300"></canvas>
        </div>
      </div>
    </div>
  </section>

  <!-- INFO SECTION -->
  <section class="info-section" id="infoSection">
    <div class="info-container">
      <div class="info-title">
        <h2>Disclaimers & Notes</h2>
      </div>
      <div class="info-content">
        <p>
          This calculator applies a user-chosen personal tax rate to:
          <ul>
            <li>Sole Prop & Partnership: Entire net income.</li>
            <li>S Corp: Entire net income (pass-through).</li>
            <li>C Corp: Salary portion only. The leftover is taxed at 21% corporately, then 15% dividends.</li>
          </ul>
        </p>
        <p>
          In reality, state taxes, multi-owner scenarios, or additional deductions can alter these figures. 
          This illustration aims to compare big-picture differences. For personalized advice, 
          consult a professional at CPA On Fire.
        </p>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="footer">
    <p>&copy; 2025 CPA On Fire. All rights reserved.</p>
  </footer>

  <!-- JAVASCRIPT -->
  <script>
    /********************************************************************
      1) CONSTANTS
    ********************************************************************/
    const SS_WAGE_BASE = 160200; // 2023 approx
    const CORP_RATE = 0.21;      // C Corp corporate tax
    const DIVIDEND_RATE = 0.15;  // 15% dividend tax (fixed)

    /********************************************************************
      2) HELPER FUNCTIONS
    ********************************************************************/
    function toCurrency(num) {
      return '$' + num.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
    }

    // Official approach for self-employment tax (Sole Prop & Partnership)
    function calcSelfEmpTax(income) {
      const netE = income * 0.9235;
      // SS portion
      let ssTax = 0;
      if (netE <= SS_WAGE_BASE) {
        ssTax = netE * 0.124; 
      } else {
        ssTax = SS_WAGE_BASE * 0.124;
      }
      // Medicare portion
      const medTax = netE * 0.029;
      return ssTax + medTax;
    }

    // Payroll tax for S or C corp salary
    function calcPayrollTax(salary) {
      let ssTax = 0;
      if (salary <= SS_WAGE_BASE) {
        ssTax = salary * 0.124;
      } else {
        ssTax = SS_WAGE_BASE * 0.124;
      }
      const medTax = salary * 0.029;
      return ssTax + medTax;
    }

    /********************************************************************
      3) MAIN CALC FUNCTION
    ********************************************************************/
    function calculateAllEntities() {
      const netIncome = parseFloat(document.getElementById('netIncomeRange').value) || 0;
      const ownerSalary = parseFloat(document.getElementById('ownerSalaryRange').value) || 0;
      const personalTaxStr = document.getElementById('personalTaxSelect').value || "0";
      const personalTaxRate = parseFloat(personalTaxStr);

      // If salary > netIncome for corp scenarios:
      if (ownerSalary > netIncome) {
        alert("Owner salary cannot exceed net income for S or C Corp scenario.");
        return;
      }

      // 1) Sole Prop
      const spSETax = calcSelfEmpTax(netIncome);
      const spPersonalTax = netIncome * personalTaxRate;
      const spTotal = spSETax + spPersonalTax;
      document.getElementById('sp-seTax').textContent = "SE Tax: " + toCurrency(spSETax);
      document.getElementById('sp-personalTax').textContent = "Personal Tax: " + toCurrency(spPersonalTax);
      document.getElementById('sp-total').textContent = "Total: " + toCurrency(spTotal);

      // 2) Partnership (similar to sole prop for an active partner)
      const ptSETax = calcSelfEmpTax(netIncome);
      const ptPersonalTax = netIncome * personalTaxRate;
      const ptTotal = ptSETax + ptPersonalTax;
      document.getElementById('pt-seTax').textContent = "SE Tax: " + toCurrency(ptSETax);
      document.getElementById('pt-personalTax').textContent = "Personal Tax: " + toCurrency(ptPersonalTax);
      document.getElementById('pt-total').textContent = "Total: " + toCurrency(ptTotal);

      // 3) S Corp
      // Salary -> payroll tax + entire net income at personal rate
      const scPayroll = calcPayrollTax(ownerSalary);
      const scPersonalTax = netIncome * personalTaxRate;
      const scTotal = scPayroll + scPersonalTax;
      document.getElementById('sc-payrollTax').textContent = "Payroll Tax: " + toCurrency(scPayroll);
      document.getElementById('sc-personalTax').textContent = "Personal Tax: " + toCurrency(scPersonalTax);
      document.getElementById('sc-total').textContent = "Total: " + toCurrency(scTotal);

      // 4) C Corp
      // Salary -> payroll tax + personal tax at "personalTaxRate"
      // leftover = netIncome - salary
      // leftover corp tax = leftover * 21%
      // leftover after corp = leftover - corp tax
      // leftover after corp subject to 15% dividend tax
      // final sum = payroll tax + personal tax on salary + leftover * 21% + leftoverAfterCorp * 15%
      const ccPayrollTax = calcPayrollTax(ownerSalary);
      const ccPersonalTaxOnSalary = ownerSalary * personalTaxRate;

      const leftover = netIncome - ownerSalary;
      let ccCorpTax = 0;
      let leftoverAfterCorp = 0;
      let ccDividendTax = 0;
      if (leftover > 0) {
        ccCorpTax = leftover * CORP_RATE; // 21%
        leftoverAfterCorp = leftover - ccCorpTax;
        ccDividendTax = leftoverAfterCorp * DIVIDEND_RATE; // 15%
      }
      const ccTotal = ccPayrollTax + ccPersonalTaxOnSalary + ccCorpTax + ccDividendTax;

      document.getElementById('cc-payrollTax').textContent = "Payroll Tax: " + toCurrency(ccPayrollTax);
      document.getElementById('cc-corpTax').textContent = "Corp Tax (21%): " + toCurrency(ccCorpTax);
      document.getElementById('cc-dividendTax').textContent = "Dividend Tax (15%): " + toCurrency(ccDividendTax);
      document.getElementById('cc-personalTax').textContent = "Personal Tax (Salary Only): " + toCurrency(ccPersonalTaxOnSalary);
      document.getElementById('cc-total').textContent = "Total: " + toCurrency(ccTotal);

      // Show results
      const resultsSection = document.getElementById('resultsSection');
      resultsSection.style.display = 'block';
      resultsSection.scrollIntoView({ behavior: 'smooth' });

      // Draw bar chart
      drawBarChart(spTotal, ptTotal, scTotal, ccTotal);
    }

    function updateNetIncomeValue(val) {
      document.getElementById('netIncomeValue').textContent = '$' + parseInt(val).toLocaleString();
    }
    function updateOwnerSalaryValue(val) {
      document.getElementById('ownerSalaryValue').textContent = '$' + parseInt(val).toLocaleString();
    }

    /********************************************************************
      4) BAR CHART (4 BARS)
    ********************************************************************/
    let chartCtx = null;
    function drawBarChart(spVal, ptVal, scVal, ccVal) {
      const canvas = document.getElementById('chartCanvas');
      if (!canvas) return;

      if (!chartCtx) {
        chartCtx = canvas.getContext('2d');
      }
      const ctx = chartCtx;
      const w = canvas.width;
      const h = canvas.height;
      ctx.clearRect(0, 0, w, h);

      const maxVal = Math.max(spVal, ptVal, scVal, ccVal) * 1.2;
      const bottom = h - 30;
      const barWidth = 50;
      const barSpacing = 40;

      const data = [
        { label: "Sole Prop", value: spVal },
        { label: "Partnership", value: ptVal },
        { label: "S Corp", value: scVal },
        { label: "C Corp", value: ccVal },
      ];
      const totalBars = data.length;
      const totalWidth = totalBars * barWidth + (totalBars - 1) * barSpacing;
      const startX = (w - totalWidth) / 2;

      function scaleVal(v) {
        return (v / maxVal) * (h - 60);
      }

      data.forEach((item, i) => {
        const x = startX + i * (barWidth + barSpacing);
        const barHeight = scaleVal(item.value);

        ctx.fillStyle = 'rgba(229,83,40,0.7)';
        ctx.fillRect(x, bottom - barHeight, barWidth, barHeight);

        // labels
        ctx.fillStyle = '#333';
        ctx.font = '14px "Open Sans"';
        ctx.fillText(item.label, x + 2, bottom + 20);
        ctx.fillText(toCurrency(item.value), x, bottom - barHeight - 5);
      });
    }
  </script>
</body>
</html>
